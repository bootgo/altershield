<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.alipay.altershield.change.exe.dal.mapper.ExeChangeOrderMapper">


    <resultMap id="BaseResultMap" type="com.alipay.altershield.change.exe.dal.dataobject.ExeChangeOrderDO">

        <id column="order_id" jdbcType="VARCHAR" property="orderId"/>
        <result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate"/>
        <result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified"/>
        <result column="biz_exec_order_id" jdbcType="VARCHAR" property="bizExecOrderId"/>
        <result column="change_scene_key" jdbcType="VARCHAR" property="changeSceneKey"/>
        <result column="platform" jdbcType="VARCHAR" property="platform"/>
        <result column="uid" jdbcType="VARCHAR" property="uid"/>
        <result column="coord" jdbcType="VARCHAR" property="coord"/>
        <result column="change_title" jdbcType="VARCHAR" property="changeTitle"/>
        <result column="change_url" jdbcType="VARCHAR" property="changeUrl"/>
        <result column="param_ref" jdbcType="VARCHAR" property="paramRef"/>
        <result column="rst_ref" jdbcType="VARCHAR" property="rstRef"/>
        <result column="change_scenario_code" jdbcType="VARCHAR" property="changeScenarioCode"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="creator" jdbcType="VARCHAR" property="creator"/>
        <result column="executor" jdbcType="VARCHAR" property="executor"/>
        <result column="change_phases" jdbcType="VARCHAR" property="changePhases"/>
        <result column="msg" jdbcType="VARCHAR" property="msg"/>
        <result column="tenant_code" jdbcType="VARCHAR" property="tenantCode"/>
        <result column="from_cloud_id" jdbcType="VARCHAR" property="fromCloudId"/>
        <result column="refer_id" jdbcType="VARCHAR" property="referId"/>
        <result column="from_tenant_code" jdbcType="VARCHAR" property="fromTenantCode"/>
        <result column="change_apps_ref" jdbcType="VARCHAR" property="changeAppsRef"/>
        <result column="plan_start_time" jdbcType="TIMESTAMP" property="planStartTime"/>
        <result column="start_time" jdbcType="TIMESTAMP" property="startTime"/>
        <result column="finish_time" jdbcType="TIMESTAMP" property="finishTime"/>
        <result column="change_content_ref" jdbcType="VARCHAR" property="changeContentRef"/>
        <result column="change_target_ref" jdbcType="VARCHAR" property="changeTargetRef"/>
        <result column="trace_id" jdbcType="VARCHAR" property="traceId"/>
        <result column="context_ref" jdbcType="VARCHAR" property="contextRef"/>
        <result column="parent_order_info_ref" jdbcType="VARCHAR" property="parentOrderInfoRef"/>
        <result column="dispatch_group" jdbcType="VARCHAR" property="dispatchGroup"/>

    </resultMap>
    <sql id="Param_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Param_Where_Clause">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="exeChangeOrderParam.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>

    <sql id="Simple_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        order_id, gmt_create, gmt_modified, biz_exec_order_id, change_scene_key, platform,
        uid, change_title, change_url, change_scenario_code, status,
        creator, executor
    </sql>

    <sql id="Base_Column_List">
        order_id, gmt_create, gmt_modified, biz_exec_order_id, change_scene_key, platform,
        uid, coord, change_title, change_url, param_ref, rst_ref, change_scenario_code, status,
        creator, executor, change_phases, msg, tenant_code, from_cloud_id, refer_id,
        from_tenant_code, change_apps_ref, plan_start_time, start_time,finish_time, change_content_ref, change_target_ref,
        trace_id, context_ref,parent_order_info_ref,dispatch_group
    </sql>
    <select id="selectByParam" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Simple_Column_List"/>
        from altershield_exe_change_order
        <if test="_parameter != null">
            <include refid="Param_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${@com.alibaba.security.SecurityUtil@trimSql4OrderBy(orderByClause)}
        </if>
        <if test="page">
            limit #{pageIndex},#{pageSize}
        </if>
    </select>

    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from altershield_exe_change_order
        where order_id = #{orderId,jdbcType=VARCHAR}
    </select>

    <select id="selectByPlatformAndBizOrderId" parameterType="map" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from altershield_exe_change_order
        where platform = #{platform} and biz_exec_order_id = #{bizExecOrderId}
    </select>

    <select id="getOrderIdByPlatformAndBizOrderId" parameterType="map" resultType="string">
        select order_id
        from altershield_exe_change_order
        where platform = #{platform} and biz_exec_order_id = #{bizExecOrderId}
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from altershield_exe_change_order
        where order_id = #{orderId,jdbcType=VARCHAR}
    </delete>

    <insert id="insert" parameterType="com.alipay.altershield.change.exe.dal.dataobject.ExeChangeOrderDO">

        insert into altershield_exe_change_order (order_id, gmt_create, gmt_modified,
        biz_exec_order_id, change_scene_key, platform,
        uid, coord, change_title,
        change_url, param_ref,rst_ref, change_scenario_code,
        status, creator, executor,
        change_phases, msg, tenant_code,
        from_cloud_id, refer_id, from_tenant_code,
        change_apps_ref, plan_start_time, start_time, finish_time,
        change_content_ref,change_target_ref, trace_id, context_ref,parent_order_info_ref,dispatch_group
        )
        values (#{orderId,jdbcType=VARCHAR}, now(),now(),
        #{bizExecOrderId,jdbcType=VARCHAR}, #{changeSceneKey,jdbcType=VARCHAR}, #{platform,jdbcType=VARCHAR},
        #{uid,jdbcType=VARCHAR}, #{coord,jdbcType=VARCHAR}, #{changeTitle,jdbcType=VARCHAR},
        #{changeUrl,jdbcType=VARCHAR}, #{paramRef,jdbcType=VARCHAR}, #{rstRef,jdbcType=VARCHAR}, #{changeScenarioCode,jdbcType=VARCHAR},
        #{status,jdbcType=VARCHAR}, #{creator,jdbcType=VARCHAR}, #{executor,jdbcType=VARCHAR},
        #{changePhases,jdbcType=VARCHAR}, #{msg,jdbcType=VARCHAR}, #{tenantCode},
        #{fromCloudId,jdbcType=VARCHAR}, #{referId,jdbcType=VARCHAR}, #{fromTenantCode},
        #{changeAppsRef,jdbcType=VARCHAR}, #{planStartTime,jdbcType=TIMESTAMP}, #{startTime,jdbcType=TIMESTAMP},
        #{finishTime,jdbcType=TIMESTAMP},
        #{changeContentRef,jdbcType=VARCHAR},
        #{changeTargetRef,jdbcType=VARCHAR},
        #{traceId,jdbcType=VARCHAR},
        #{contextRef,jdbcType=VARCHAR},#{parentOrderInfoRef,jdbcType=VARCHAR},#{dispatchGroup,jdbcType=VARCHAR}
        )
    </insert>
    <select id="countByParam" resultType="java.lang.Long">

        select count(*) from altershield_exe_change_order
        <if test="_parameter != null">
            <include refid="Param_Where_Clause"/>
        </if>
    </select>

    <select id="getBizExecOrderIdByOrderId" parameterType="java.lang.String" resultType="string">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select biz_exec_order_id from altershield_exe_change_order
        where order_id = #{orderId,jdbcType=VARCHAR}
    </select>


    <update id="updateByPrimaryKey" parameterType="com.alipay.altershield.change.exe.dal.dataobject.ExeChangeOrderDO">

        update altershield_exe_change_order
        <set>
            gmt_modified = now(),
            <if test="status != null">
                status = #{status,jdbcType=VARCHAR},
            </if>
            <if test="creator != null">
                creator = #{creator,jdbcType=VARCHAR},
            </if>
            <if test="executor != null">
                executor = #{executor,jdbcType=VARCHAR},
            </if>
            <if test="msg != null">
                msg = #{msg,jdbcType=VARCHAR},
            </if>
            <if test="startTime != null">
                start_time = #{startTime,jdbcType=TIMESTAMP},
            </if>
            <if test="finishTime != null">
                finish_time = #{finishTime,jdbcType=TIMESTAMP},
            </if>
            <if test="contextRef != null">
                context_ref = #{contextRef,jdbcType=VARCHAR},
            </if>
        </set>
        where order_id = #{orderId,jdbcType=VARCHAR}
    </update>

</mapper>